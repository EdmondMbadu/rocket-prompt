<div class="relative isolate min-h-screen overflow-hidden bg-gradient-to-br from-slate-900 via-purple-900/80 to-slate-950 px-4 pb-10 text-white md:px-8 md:pb-16">
  <div class="pointer-events-none absolute inset-0 opacity-20">
    <div class="absolute left-1/2 top-0 h-64 w-64 -translate-x-1/2 rounded-full bg-purple-500 blur-3xl"></div>
    <div class="absolute bottom-10 right-10 h-52 w-52 rounded-full bg-pink-500 blur-3xl"></div>
  </div>

  <nav class="relative z-10 flex items-center justify-between gap-4 px-1 py-6 text-sm md:px-0 md:py-8">
    <a routerLink="/" class="text-lg font-semibold transition hover:text-purple-200 md:text-xl" (click)="closeMobileMenu()">
      üöÄ RocketPrompt.io
    </a>

    <button
      type="button"
      class="flex items-center gap-2 rounded-lg border border-white/20 px-3 py-2 uppercase tracking-wide text-white transition hover:border-white/40 hover:bg-white/10 md:hidden"
      (click)="toggleMobileMenu()"
      aria-label="Toggle navigation"
      [attr.aria-expanded]="mobileMenuOpen()"
    >
      <span>{{ mobileMenuOpen() ? 'Close' : 'Menu' }}</span>
      <span class="text-lg" aria-hidden="true">‚ò∞</span>
    </button>

    <div class="hidden items-center gap-3 md:flex">
      <button
        type="button"
        class="rounded-lg border border-white/30 px-4 py-2 text-sm font-semibold uppercase tracking-wide text-white transition hover:border-white hover:bg-white/10"
        (click)="setActiveMode('signup')"
      >
        Sign Up
      </button>
      <button
        type="button"
        class="rounded-lg bg-purple-600 px-4 py-2 text-sm font-semibold uppercase tracking-wide text-white transition hover:bg-purple-700"
        (click)="setActiveMode('login')"
      >
        Log in
      </button>
    </div>
  </nav>

  <div
    *ngIf="mobileMenuOpen()"
    class="relative z-10 mb-6 flex flex-col gap-3 rounded-2xl border border-white/10 bg-white/10 p-4 text-sm text-white md:hidden"
  >
    <button
      type="button"
      class="rounded-lg border border-white/30 px-4 py-2 text-left font-semibold uppercase tracking-wide text-white transition hover:border-white hover:bg-white/10"
      (click)="setActiveMode('signup')"
    >
      Sign Up
    </button>
    <button
      type="button"
      class="rounded-lg bg-purple-600 px-4 py-2 text-left font-semibold uppercase tracking-wide text-white transition hover:bg-purple-700"
      (click)="setActiveMode('login')"
    >
      Log in
    </button>
  </div>

  <section class="relative z-10 mx-auto grid max-w-4xl gap-10 rounded-3xl border border-white/10 bg-white/5 p-6 backdrop-blur-xl md:grid-cols-[1.1fr_0.9fr] md:p-10">
    <div class="space-y-6">
      <p class="flex items-center gap-2 text-sm font-semibold uppercase tracking-[0.35em] text-purple-200/70">
        <span class="inline-flex h-2 w-2 rounded-full bg-gradient-to-r from-purple-400 to-pink-400"></span>
        RocketPrompt Access
      </p>
    <h1 class="text-3xl font-bold leading-tight md:text-4xl">{{ heading() }}</h1>
    <p class="text-base text-white/70">
      Manage your RocketPrompt workspace with a secure login backed by Firebase Authentication. Enter your details to
      get started, and we‚Äôll email you a verification link before your first sign in.
    </p>

    <div class="rounded-2xl border border-white/10 bg-black/20 p-4 text-sm text-white/60 shadow-lg shadow-purple-900/40">
      <p class="font-semibold text-white">What to know</p>
      <ul class="mt-2 space-y-1">
        <li>‚Ä¢ Use the same email for Firebase auth and your user profile.</li>
        <li>‚Ä¢ Keep your profile details up to date for a smoother onboarding.</li>
        <li>‚Ä¢ Accounts stay locked until you verify the email we send.</li>
      </ul>
    </div>
  </div>

  <form [formGroup]="authForm" (ngSubmit)="onSubmit()" class="space-y-6 rounded-3xl border border-white/10 bg-white/10 p-6 shadow-2xl shadow-purple-900/40">
    <div class="space-y-2 text-center">
      <h2 class="text-2xl font-semibold">{{ ctaLabel() }}</h2>
      <p class="text-sm text-white/60">{{ mode() === 'signup' ? 'Create a password to unlock your prompts.' : 'Enter your verified details to continue.' }}</p>
    </div>

    <div *ngIf="mode() === 'signup'" class="grid gap-4 md:grid-cols-2">
      <label class="block text-sm text-white/80">
        <span class="mb-1 block font-semibold uppercase tracking-wide text-xs text-white/50">First name</span>
        <input
          type="text"
          formControlName="firstName"
          autocomplete="given-name"
          class="w-full rounded-xl border border-white/10 bg-black/40 px-4 py-2 text-white outline-none transition focus:border-purple-400 focus:ring-2 focus:ring-purple-400/40"
        />
        <span *ngIf="authForm.get('firstName')?.invalid && authForm.get('firstName')?.touched" class="mt-1 block text-xs text-rose-300">
          Please provide your first name (min 2 characters).
        </span>
      </label>

      <label class="block text-sm text-white/80">
        <span class="mb-1 block font-semibold uppercase tracking-wide text-xs text-white/50">Last name</span>
        <input
          type="text"
          formControlName="lastName"
          autocomplete="family-name"
          class="w-full rounded-xl border border-white/10 bg-black/40 px-4 py-2 text-white outline-none transition focus:border-purple-400 focus:ring-2 focus:ring-purple-400/40"
        />
        <span *ngIf="authForm.get('lastName')?.invalid && authForm.get('lastName')?.touched" class="mt-1 block text-xs text-rose-300">
          Please provide your last name (min 2 characters).
        </span>
      </label>
    </div>

    <label class="block text-sm text-white/80">
      <span class="mb-1 block font-semibold uppercase tracking-wide text-xs text-white/50">Email</span>
      <input
        type="email"
        formControlName="email"
        autocomplete="email"
        class="w-full rounded-xl border border-white/10 bg-black/40 px-4 py-2 text-white outline-none transition focus:border-purple-400 focus:ring-2 focus:ring-purple-400/40"
      />
      <span *ngIf="authForm.get('email')?.invalid && authForm.get('email')?.touched" class="mt-1 block text-xs text-rose-300">
        Please enter a valid email address.
      </span>
    </label>

    <label class="block text-sm text-white/80">
      <span class="mb-1 block font-semibold uppercase tracking-wide text-xs text-white/50">Password</span>
      <input
        type="password"
        formControlName="password"
        autocomplete="new-password"
        class="w-full rounded-xl border border-white/10 bg-black/40 px-4 py-2 text-white outline-none transition focus:border-purple-400 focus:ring-2 focus:ring-purple-400/40"
      />
      <span *ngIf="authForm.get('password')?.invalid && authForm.get('password')?.touched" class="mt-1 block text-xs text-rose-300">
        Password must be at least 6 characters long.
      </span>
    </label>

    <div *ngIf="errorMessage" class="rounded-xl border border-rose-500/50 bg-rose-500/10 p-3 text-sm text-rose-200">
      {{ errorMessage }}
    </div>

    <div *ngIf="successMessage" class="rounded-xl border border-emerald-400/40 bg-emerald-400/10 p-3 text-sm text-emerald-200">
      {{ successMessage }}
    </div>

    <button
      type="submit"
      [disabled]="authForm.invalid || isSubmitting"
      class="flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-3 text-sm font-semibold uppercase tracking-wide text-white transition hover:from-purple-400 hover:to-pink-400 disabled:cursor-not-allowed disabled:from-white/20 disabled:to-white/10 disabled:text-white/50"
    >
      <span class="text-lg" aria-hidden="true">üîê</span>
      <span>{{ isSubmitting ? 'Working...' : ctaLabel() }}</span>
    </button>

    <div class="text-center text-sm text-white/70">
      {{ toggleLabel() }}
      <button type="button" class="ml-1 font-semibold text-purple-200 hover:text-purple-100" (click)="switchMode()">
        {{ toggleAction() }}
      </button>
    </div>

    <div class="rounded-2xl border border-white/10 bg-black/30 p-4 text-xs text-white/50">
      Need help? Check your spam folder for the verification email or contact your Firebase admin to approve the user
      ID.
    </div>
  </form>
  </section>
</div>
