<div class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900/80 to-slate-950 px-4 py-16 text-white">
  <div class="mx-auto flex w-full max-w-md flex-col items-stretch gap-8">
    <a routerLink="/" class="flex items-center justify-center gap-2 text-sm text-white/70 transition hover:text-white">
      <span class="flex h-10 w-10 items-center justify-center rounded-2xl bg-white/10 text-2xl">ğŸš€</span>
      <span class="font-semibold tracking-wide uppercase">Rocket Prompt</span>
    </a>

    <div class="space-y-3 text-center">
      <h1 class="text-3xl font-semibold tracking-tight">{{ heading() }}</h1>
      <p class="mx-auto max-w-sm text-sm text-white/70">{{ description() }}</p>
    </div>

    <form
      [formGroup]="authForm"
      (ngSubmit)="onSubmit()"
      class="space-y-6 rounded-3xl border border-white/10 bg-white/10 p-8 shadow-2xl shadow-purple-900/40 backdrop-blur"
      novalidate
    >
      <ng-container [ngSwitch]="mode()">
        <div *ngSwitchCase="'signup'" class="grid gap-4 sm:grid-cols-2">
          <label class="text-left text-sm text-white/80">
            <span class="mb-1 block text-xs font-semibold uppercase tracking-wide text-white/50">First name</span>
            <input
              type="text"
              formControlName="firstName"
              autocomplete="given-name"
              class="w-full rounded-xl border border-white/10 bg-black/30 px-4 py-2 text-white outline-none transition focus:border-purple-300 focus:ring-2 focus:ring-purple-400/40"
            />
            <span
              *ngIf="authForm.get('firstName')?.invalid && authForm.get('firstName')?.touched"
              class="mt-1 block text-xs text-rose-300"
            >
              Please enter your first name (min 2 characters).
            </span>
          </label>

          <label class="text-left text-sm text-white/80">
            <span class="mb-1 block text-xs font-semibold uppercase tracking-wide text-white/50">Last name</span>
            <input
              type="text"
              formControlName="lastName"
              autocomplete="family-name"
              class="w-full rounded-xl border border-white/10 bg-black/30 px-4 py-2 text-white outline-none transition focus:border-purple-300 focus:ring-2 focus:ring-purple-400/40"
            />
            <span
              *ngIf="authForm.get('lastName')?.invalid && authForm.get('lastName')?.touched"
              class="mt-1 block text-xs text-rose-300"
            >
              Please enter your last name (min 2 characters).
            </span>
          </label>
        </div>
      </ng-container>

      <label class="block text-left text-sm text-white/80">
        <span class="mb-1 block text-xs font-semibold uppercase tracking-wide text-white/50">Email</span>
        <input
          type="email"
          formControlName="email"
          autocomplete="email"
          class="w-full rounded-xl border border-white/10 bg-black/30 px-4 py-2 text-white outline-none transition focus:border-purple-300 focus:ring-2 focus:ring-purple-400/40"
        />
        <span *ngIf="authForm.get('email')?.invalid && authForm.get('email')?.touched" class="mt-1 block text-xs text-rose-300">
          Please enter a valid email address.
        </span>
      </label>

      <ng-container *ngIf="mode() !== 'reset'">
        <label class="block text-left text-sm text-white/80">
          <span class="mb-1 block text-xs font-semibold uppercase tracking-wide text-white/50">Password</span>
          <input
            type="password"
            formControlName="password"
            [attr.autocomplete]="mode() === 'signup' ? 'new-password' : 'current-password'"
            class="w-full rounded-xl border border-white/10 bg-black/30 px-4 py-2 text-white outline-none transition focus:border-purple-300 focus:ring-2 focus:ring-purple-400/40"
          />
          <span
            *ngIf="authForm.get('password')?.invalid && authForm.get('password')?.touched"
            class="mt-1 block text-xs text-rose-300"
          >
            Password must be at least 6 characters long.
          </span>
        </label>

        <div *ngIf="mode() === 'login'" class="text-right">
          <button
            type="button"
            class="text-xs font-semibold text-purple-200 transition hover:text-purple-100"
            (click)="setMode('reset')"
          >
            Forgot password?
          </button>
        </div>
      </ng-container>

      <div *ngIf="errorMessage" class="rounded-xl border border-rose-500/40 bg-rose-500/10 p-3 text-sm text-rose-200">
        {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="rounded-xl border border-emerald-400/40 bg-emerald-400/10 p-3 text-sm text-emerald-200">
        {{ successMessage }}
      </div>

      <button
        type="submit"
        [disabled]="authForm.invalid || isSubmitting"
        class="flex w-full items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 px-5 py-3 text-sm font-semibold uppercase tracking-wide text-white transition hover:from-purple-400 hover:to-pink-400 disabled:cursor-not-allowed disabled:from-white/20 disabled:to-white/10 disabled:text-white/50"
      >
        <ng-container *ngIf="isSubmitting; else defaultIcon">
          <svg class="h-4 w-4 animate-spin text-white" viewBox="0 0 24 24" fill="none">
            <circle class="opacity-20" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path
              class="opacity-80"
              d="M4 12a8 8 0 018-8"
              stroke="currentColor"
              stroke-width="4"
              stroke-linecap="round"
            ></path>
          </svg>
        </ng-container>
        <ng-template #defaultIcon>
          <span aria-hidden="true" class="text-lg">
            {{ mode() === 'signup' ? 'âœ¨' : mode() === 'reset' ? 'ğŸ“§' : 'ğŸ”' }}
          </span>
        </ng-template>
        <span>{{ isSubmitting ? 'Working...' : ctaLabel() }}</span>
      </button>

      <div class="text-center text-sm text-white/70">
        <ng-container [ngSwitch]="mode()">
          <span *ngSwitchCase="'login'">
            Don't have an account?
            <button type="button" class="ml-1 font-semibold text-purple-200 hover:text-purple-100" (click)="setMode('signup')">
              Create one
            </button>
          </span>
          <span *ngSwitchCase="'signup'">
            Already have an account?
            <button type="button" class="ml-1 font-semibold text-purple-200 hover:text-purple-100" (click)="setMode('login')">
              Sign in
            </button>
          </span>
          <span *ngSwitchCase="'reset'">
            Remembered your password?
            <button type="button" class="ml-1 font-semibold text-purple-200 hover:text-purple-100" (click)="setMode('login')">
              Back to sign in
            </button>
          </span>
        </ng-container>
      </div>
    </form>
  </div>
</div>
